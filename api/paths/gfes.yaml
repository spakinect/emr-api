get:
  summary: Get All GFEs by Location
  description: >
    Retrieves all Good Faith Exam (GFE) visits for a specific location. Only
    returns visits that the authenticated EMR has access to based on location
    permissions. When visit status is "Completed", each visit includes decision
    outcomes mapped to treatment names: approved_treatments,
    conditionally_approved_treatments, and deferred_treatments.
  operationId: getAllGFEsByLocation
  tags:
    - GFEs
  parameters:
    - name: location_id
      in: path
      required: true
      description: The unique identifier of the location
      schema:
        type: string
        example: loc_12345
  responses:
    "200":
      description: List of GFEs retrieved successfully
      content:
        application/json:
          schema:
            $ref: "../emr-openapi.yaml#/components/schemas/GFEsByLocationResponse"
          examples:
            gfes_list:
              summary: List of GFEs for location
              value:
                success: true
                location_id: loc_12345
                count: 2
                gfes:
                  - gfe_id: gfe_abc123xyz789
                    status: Completed
                    requested_treatments:
                      - Botox Injection
                      - Dermal Filler
                    approved_treatments:
                      - Botox Injection
                    conditionally_approved_treatments:
                      - Dermal Filler
                    deferred_treatments: []
                    pdf_link: https://example-cdn.com/gfe/gfe_abc123xyz789.pdf
                    patient_details:
                      name: Jane Smith
                      first_name: Jane
                      last_name: Smith
                      dob: "05-15-1985"
                      email: jane.smith@example.com
                  - gfe_id: gfe_def456uvw012
                    status: Processing
                    requested_treatments:
                      - Chemical Peel
                    patient_details:
                      name: John Doe
                      first_name: John
                      last_name: Doe
                      dob: "10-27-1990"
                      email: john.doe@example.com
            empty_list:
              summary: No GFEs found for location
              value:
                success: true
                location_id: loc_12345
                count: 0
                gfes: []
    "400":
      $ref: "../emr-openapi.yaml#/components/responses/BadRequest"
    "401":
      $ref: "../emr-openapi.yaml#/components/responses/Unauthorized"
    "403":
      $ref: "../emr-openapi.yaml#/components/responses/Forbidden"
    "404":
      $ref: "../emr-openapi.yaml#/components/responses/NotFound"
    "500":
      $ref: "../emr-openapi.yaml#/components/responses/InternalServerError"
